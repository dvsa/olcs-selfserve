<?php

$count = $this->results->getTotal();
$results = $this->results;

?>

<?php
/** @var \Common\Service\Helper\TranslationHelperService $translationHlp */
$translationHlp = $this->getHelperPluginManager()->getServiceLocator()->get('Helper\Translation');

echo $this->partial(
    'partials/page-header-simple',
    [
        'pageTitle' => $this->translate('search.result.title.' . $this->index),
        'pageHeaderText' =>
            '<p>' . $translationHlp->translateReplace('search.result.subtitle.' . $this->index, [$count]) . '</p>' .
            (
                $this->index === 'publication'
                ? '<p>' . $this->translate('search.result.subtitle.publication.download') .'</p>'
                : ''
            ),
        'pageHeaderTextEscape' => false,
        'backUrl' => [
            'url' => $this->url('search'),
        ],
    ]
);
?>

<div class="row">
    <div class="one-quarter sidebar--plain search-filter">

        <h3 id="filterTitle"><?php echo $this->translate('search.form.title') ?></h3>

        <?php echo $this->form($this->placeholder('searchFilter')->getValue()) ?>

    </div><!-- three-eights -->

    <div class="three-quarters">

        <?php
        if ($this->noResultsMessage) {
            echo $this->translate($noResultsMessage);
        } else {
            // OLCS-13312 - publication has a different view for the results so renders its own title in
            // common/view/layouts/table/traffic-commissioner-publication.phml
            if (strtolower($this->index) !== 'publication') {
            ?>
            <div class="content__header">
                <h3 class="title"><?php
                    echo $count . ' ' . $this->translate('search.result.results-title.' . $this->index);
                    ?></h3>
            </div>
            <?php
            }
            echo $results;
        }
        ?>

    </div><!-- five-eights -->
</div><!-- row -->
